
# Ветка с парсером

## Цель:

Парсингом с маркетплейсом собрать две обучающие размеченные выборки, состоящие из фотографий одежды. Первая должна включать в себя >5000 фотографий с витрины товара ([качественная, чистая](https://a.lmcdn.ru/img600x866/M/P/MP002XW1G0SE_26726427_1_v2_2x.jpg)). Вторая — >5000 фотографий, взятых из отзывов к товарам ([данные с шумами](https://a.lmcdn.ru/photoreview/?key=0b699489-c853-3c4d-7cc8-63614a3ddb69-photoreview-s3.jpeg))

## Сайты на парсинг:

<ul>
<li>Вайлбериз</li>
<li>Ламода</li>
<li>Яндекс</li>
<li>Озон (под вопросом, т. к. блокирует любые библиотеки для парсинга. Скорее всего, запарсится через платный прокси)</li>
</ul>

## Распределение выборки

Общее количество фотографий — 12000 (пополам на обе выборки). Из них 6000 / 3  (без Озона) = 2000 качественных с каждого сайта и по 2000 — некачественных с каждого. Притом в любой из выборок одинаковое количество мужской и женской одежды, но случайное количество конкретной (в т. ч. нулевое, т. к. товары парсятся по популярности)
При сборке "make parse" начинает подтягивать данные в папку data. В папке data лежат папки с названием маркетплейса, откуда произошла подгрузка. В каждой папке маркетплейса лежат две папки: showcase (витринные фотографии) и review_gallery (запарсенные с отзывов). Уже в этих папках лежат папки с названиями категорий товаров, которые содержат изображения в jpe/jpeg
Пример: data/lamoda/showcase/Рубашка/sample_35.jpeg

## Прогресс (23:50, 31.05.2025)

Полностью готов парсер фотографий с Ламоды:
<ol>  
<li>Заходит во вкладку "Одежда" сначала в женском разделе (раздел без конкретной категории с популярными и рекомендуемыми товарами)</li>
<li>Парсит в массив ссылки позиций (60 на одной странице)</li>  
<li>Проходит массив, заглядывая в каждую ссылку и забирая фотографии с витрины и с секции отзывов. В витрине забирает первые три фотографии (перед, зад и перед без человека). В отзывах: если фотографий больше пяти, то они перемешиваются и возвращаются случайные 5 фото, в остальных случаях берет сколько есть</li>
<li>Открывает следующую страницу, снова парсит массив ссылок и т. д. Цикл продолжается 7 раз: среднее по количеству фотографий с одной позиции = 2.5 (5 / 2), 2.5 * 60 (количество товаров на странице) = 150. ⎾2000 / 150⏋ = 14. 14 / 2 = 7 (поровну с женского и мужского разделов)</li>
<li>Переходит в мужской раздел и проделывает те же действия</li>  
</ol>

## Задачи

<ul>
<li>Отработать TODO в parser.py</li>
<li>Расписать комментарии</li>
<li>Добавить логирование</li>
<li>Отрефакторить логику и взаимодействие между элементами класса Parser</li>
<li>Добавить сверку по хэшу ссылки товара для избежания повторного скачивания (в случае, когда парсер отрабатывает не в первый раз)</li>
<li>...</li>
</ul>